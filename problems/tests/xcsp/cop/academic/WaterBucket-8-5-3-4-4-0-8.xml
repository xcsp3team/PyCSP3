<instance format="XCSP3" type="COP">
  <variables>
    <array id="x" note="x[t][i] is the volume of water in bucket i at time (round) t" size="[8][3]">
      <domain for="x[][0]"> 0..8 </domain>
      <domain for="x[][1]"> 0..5 </domain>
      <domain for="x[][2]"> 0..3 </domain>
    </array>
    <var id="z" note="z is the number of transfers of water in order to reach the goal"> 0..7 </var>
  </variables>
  <constraints>
    <instantiation note="Initially, at round 0, the bucket 1 is full of water while the other buckets are empty">
      <list> x[0][] </list>
      <values> 8 0 0 </values>
    </instantiation>
    <group note="only some transfers are possible between two successive rounds">
      <extension>
        <list> %... </list>
        <supports> (0,5,3,3,5,0)(0,5,3,5,0,3)(1,4,3,0,5,3)(1,4,3,1,5,2)(1,4,3,4,4,0)(1,4,3,5,0,3)(1,5,2,0,5,3)(1,5,2,1,4,3)(1,5,2,3,5,0)(1,5,2,6,0,2)(2,3,3,0,5,3)(2,3,3,2,5,1)(2,3,3,5,0,3)(2,3,3,5,3,0)(2,4,2,1,4,3)(2,4,2,1,5,2)(2,4,2,2,3,3)(2,4,2,2,5,1)(2,4,2,4,4,0)(2,4,2,6,0,2)(2,5,1,0,5,3)(2,5,1,2,3,3)(2,5,1,3,5,0)(2,5,1,7,0,1)(3,2,3,0,5,3)(3,2,3,3,5,0)(3,2,3,5,0,3)(3,2,3,6,2,0)(3,3,2,1,5,2)(3,3,2,2,3,3)(3,3,2,3,2,3)(3,3,2,3,5,0)(3,3,2,5,3,0)(3,3,2,6,0,2)(3,4,1,1,4,3)(3,4,1,2,5,1)(3,4,1,3,2,3)(3,4,1,3,5,0)(3,4,1,4,4,0)(3,4,1,7,0,1)(3,5,0,0,5,3)(3,5,0,3,2,3)(3,5,0,8,0,0)(4,1,3,0,5,3)(4,1,3,4,4,0)(4,1,3,5,0,3)(4,1,3,7,1,0)(4,2,2,1,5,2)(4,2,2,3,2,3)(4,2,2,4,1,3)(4,2,2,4,4,0)(4,2,2,6,0,2)(4,2,2,6,2,0)(4,3,1,2,3,3)(4,3,1,2,5,1)(4,3,1,4,1,3)(4,3,1,4,4,0)(4,3,1,5,3,0)(4,3,1,7,0,1)(4,4,0,4,4,0)(5,0,3,0,5,3)(5,0,3,5,3,0)(5,0,3,8,0,0)(5,1,2,1,5,2)(5,1,2,4,1,3)(5,1,2,5,0,3)(5,1,2,5,3,0)(5,1,2,6,0,2)(5,1,2,7,1,0)(5,2,1,2,5,1)(5,2,1,3,2,3)(5,2,1,5,0,3)(5,2,1,5,3,0)(5,2,1,6,2,0)(5,2,1,7,0,1)(5,3,0,2,3,3)(5,3,0,3,5,0)(5,3,0,5,0,3)(5,3,0,8,0,0)(6,0,2,1,5,2)(6,0,2,5,0,3)(6,0,2,6,2,0)(6,0,2,8,0,0)(6,1,1,2,5,1)(6,1,1,4,1,3)(6,1,1,6,0,2)(6,1,1,6,2,0)(6,1,1,7,0,1)(6,1,1,7,1,0)(6,2,0,3,2,3)(6,2,0,3,5,0)(6,2,0,6,0,2)(6,2,0,8,0,0)(7,0,1,2,5,1)(7,0,1,5,0,3)(7,0,1,7,1,0)(7,0,1,8,0,0)(7,1,0,3,5,0)(7,1,0,4,1,3)(7,1,0,7,0,1)(7,1,0,8,0,0)(8,0,0,3,5,0)(8,0,0,5,0,3) </supports>
      </extension>
      <args> x[0..1][] </args>
      <args> x[1..2][] </args>
      <args> x[2..3][] </args>
      <args> x[3..4][] </args>
      <args> x[4..5][] </args>
      <args> x[5..6][] </args>
      <args> x[6..7][] </args>
    </group>
    <extension note="computing the number of transfers">
      <list> z x[][] </list>
      <supports> (0,4,4,0,4,4,0,4,4,0,4,4,0,4,4,0,4,4,0,4,4,0,4,4,0)(1,*,*,*,4,4,0,4,4,0,4,4,0,4,4,0,4,4,0,4,4,0,4,4,0)(2,*,*,*,*,*,*,4,4,0,4,4,0,4,4,0,4,4,0,4,4,0,4,4,0)(3,*,*,*,*,*,*,*,*,*,4,4,0,4,4,0,4,4,0,4,4,0,4,4,0)(4,*,*,*,*,*,*,*,*,*,*,*,*,4,4,0,4,4,0,4,4,0,4,4,0)(5,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,4,4,0,4,4,0,4,4,0)(6,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,4,4,0,4,4,0)(7,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,*,4,4,0) </supports>
    </extension>
  </constraints>
  <objectives>
    <minimize note="minimizing the number of transfers"> z </minimize>
  </objectives>
</instance>
